{"version":3,"sources":["assets\\script\\persist_node.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class persist_node extends cc.Component {\r\n    gaussian_random(mean=0, sigma=1, n=12) // 0-1上高斯分布\r\n    {\r\n        let ret = 0.\r\n        for (let i = 0; i < n; ++i)\r\n        {\r\n            ret += Math.random()\r\n        }\r\n        return mean + (ret-(n/2)) * sigma\r\n    }\r\n\r\n\r\n    is_create_bubble:boolean = false;  //是否要产生气泡，或者说是否打坐修炼\r\n\r\n\r\n    @property(cc.Node)\r\n    beibao: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    attribute_panel:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    exp:cc.Node=null;\r\n\r\n    @property(Object)\r\n    event_lib: Object = null\r\n\r\n    @property\r\n    focus = null\r\n\r\n\r\n    //lxt:精力条api\r\n    @property\r\n    energy: number = 500\r\n\r\n    @property\r\n    event_permitted: boolean = true\r\n\r\n    @property\r\n    energy_recover: boolean = true\r\n\r\n    max_energy()\r\n    {\r\n        return 500\r\n    }\r\n\r\n    setEnergy(e: number)\r\n    {\r\n        this.energy = e\r\n    }\r\n\r\n    changeEnergy(e: number)  //改变精力值\r\n    {\r\n        this.energy = this.energy + e <= this.max_energy() ? this.energy + e : this.max_energy()\r\n        //console.debug(this.energy)\r\n    }\r\n\r\n    getEnergy()  //返回当前的精力值\r\n    {\r\n        return this.energy\r\n    }\r\n    \r\n    //寿命\r\n    @property\r\n    age: number = 18\r\n\r\n    @property\r\n    age_limited: number = 0\r\n\r\n    addAge(n = 5) // 每次选择事件经过X年\r\n    {\r\n        this.age = this.age + n <= this.age_limited ? this.age + n : this.age_limited\r\n    }\r\n\r\n    getAge()\r\n    {\r\n        return this.age \r\n    }\r\n\r\n    initAge()\r\n    {\r\n        this.age_limited = Math.round(100 + this.gaussian_random(-20,10)) \r\n    }\r\n\r\n    //事件\r\n    @property\r\n    event_grade_map = null\r\n    \r\n    @property\r\n    grade_map = null\r\n\r\n    dispatch_event_without_requirement(group: number) //分组内发下一个没有要求的事件（非常驻，常驻都是没有要求的\r\n    {\r\n        //先进行事件类型判断，类型为 1_2[_3], 123是不同属性名称， 1决定事件是否出现，2决定分支和收益系数，3决定事件是否只出现一次\r\n        let group_name = Object.keys(this.event_lib)[group]\r\n        let inconst_events = this.event_lib[group_name]['events'][1]\r\n        let inconst_names = Object.keys(inconst_events)\r\n        //console.debug(inconst_names)\r\n        let t = new Array()\r\n        let ret = []\r\n        for (let name of inconst_names)\r\n        {\r\n            let types = inconst_events[name][0].toString().split('，')\r\n            //console.debug(types[0].trim())\r\n            if (types[0].trim()=='0' || types[0].trim()=='_') t.push(name.trim())\r\n        }\r\n        //console.debug('detect:')\r\n        //console.debug(t)\r\n        t.sort(()=>{\r\n            return 0.5-Math.random()\r\n        })\r\n        ret.push(t[0])\r\n        ret.push(inconst_events[t[0]][0])\r\n        ret.push(inconst_events[t[0]][1])\r\n        ret.push(inconst_events[t[0]][2])\r\n        //console.debug('return: ')\r\n        //console.debug(t[0])\r\n        //console.debug(ret)\r\n        return ret\r\n    }\r\n\r\n    dispatch_event(group: number, num_0: number=2, num_1: number=3) \r\n    // group: 0-凡世；1-坊市；2-宗门；3-魔地；4-海外, \r\n    // num_0, num_1: 分别是常驻和非常驻需要分发的个数\r\n    // function:从对应group中随机出若干个事件发下,并处理部分前置逻辑关系\r\n    {\r\n        let ret = new Array()\r\n        let group_name = Object.keys(this.event_lib)[group]\r\n        let const_events = this.event_lib[group_name]['events'][0]\r\n        let inconst_events = this.event_lib[group_name]['events'][1]\r\n        let const_names = Object.keys(const_events)\r\n        let inconst_names = Object.keys(inconst_events)\r\n        const_names.sort(()=>{\r\n            return 0.5-Math.random()\r\n        })\r\n        inconst_names.sort(()=>{\r\n            return 0.5-Math.random()\r\n        })\r\n         // 分发的事件为一个数组[[title, type, reward, description], [title, type, reward, description]...]\r\n         \r\n        for (let i = 0; i < num_0; ++i) \r\n        {\r\n            let t = new Array(4)\r\n            t[0] = const_names[i]\r\n            t[1] = const_events[const_names[i]][0]\r\n            t[2] = const_events[const_names[i]][1]\r\n            t[3] = const_events[const_names[i]][2]\r\n            //console.debug(t)\r\n            ret.push(t)\r\n        }\r\n        for (let i = 0; i < num_1; ++i) \r\n        {\r\n            let t = new Array(4)\r\n            t[0] = inconst_names[i]\r\n            t[1] = inconst_events[inconst_names[i]][0]\r\n            t[2] = inconst_events[inconst_names[i]][1]\r\n            t[3] = inconst_events[inconst_names[i]][2]\r\n            //console.debug(t)\r\n            ret.push(t)\r\n            \r\n        }\r\n        //console.debug(ret)\r\n        return ret\r\n        //console.debug(typeof(const_names))\r\n        //console.debug(Object.keys(const_events))\r\n        //console.debug(Object.keys(inconst_events))\r\n    }\r\n\r\n    match_event_grade() \r\n    // 将各组事件与其各种收益和消耗基本绑定（不算扰动）\r\n    // 最终一个title对应一个长度为12的数组，对应各组数值\r\n    {\r\n        //假设21点抽牌概率是均匀的，每张牌的期望消耗应该是7*500/21=167，\r\n        //范围应该是1*500/21=24~13*500/21=310，牌的张数根据这个期望均匀分布\r\n        let num_groups = Object.keys(this.event_lib).length\r\n        //console.debug(num_groups)\r\n        this.grade_map = new Map()\r\n        for (let i = 0; i < num_groups; ++i)\r\n        {\r\n            this.event_grade_map.set(i, new Map<string, number>()) //为每个组都分配一个grade map,每个组的每个事件对应一个值(精力消耗)\r\n            this.grade_map.set(i, new Map<string, number>())\r\n            let const_events = this.event_lib[Object.keys(this.event_lib)[i]]['events'][0]\r\n            let inconst_events = this.event_lib[Object.keys(this.event_lib)[i]]['events'][1]\r\n            let const_titles = Object.keys(const_events)\r\n            let inconst_titles = Object.keys(inconst_events)\r\n            \r\n            //console.debug(const_titles)\r\n            //console.debug(inconst_titles)\r\n            const_titles.sort(()=>{\r\n                return 0.5-Math.random()\r\n            })\r\n            inconst_titles.sort(()=>{\r\n                return 0.5-Math.random()\r\n            })\r\n            let interval_const = const_titles.length < 13 ? (310-24)/(const_titles.length-1) : (310-24)/13\r\n            let interval_inconst = inconst_titles.length < 13 ? (310-24)/(inconst_titles.length-1) : (310-24)/13\r\n\r\n            let upper = const_titles.length <= 13 ? const_titles.length : 13\r\n            for (let j = 0; j < upper; ++j) \r\n            {\r\n                this.event_grade_map.get(i).set(const_titles[j], 24+j*interval_const)\r\n                this.grade_map.get(i).set(const_titles[j], j)\r\n            }\r\n            for (let j = upper; j < const_titles.length; ++j)\r\n            {\r\n                let grade = Math.round(Math.random()*13)\r\n                this.event_grade_map.get(i).set(const_titles[j], 24+grade*interval_const)\r\n                this.grade_map.get(i).set(const_titles[j], grade)\r\n            } \r\n\r\n            upper = inconst_titles.length <= 13 ? inconst_titles.length : 13\r\n            for (let j = 0; j < upper; ++j)\r\n            {   \r\n                this.event_grade_map.get(i).set(inconst_titles[j], 24+j*interval_inconst)\r\n                this.grade_map.get(i).set(inconst_titles[j], j)\r\n            }\r\n            \r\n            for (let j = upper; j < inconst_titles.length; ++j) \r\n            {\r\n                let grade = Math.round(Math.random()*13)\r\n                this.event_grade_map.get(i).set(inconst_titles[j], 24+grade*interval_inconst)\r\n                this.grade_map.get(i).set(inconst_titles[j], grade)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    get_event_energy(group_idx: number, event_title)\r\n    {\r\n        return this.event_grade_map.get(group_idx).get(event_title) + this.gaussian_random(0,10)\r\n    }\r\n\r\n    get_event_grade(group_idx: number, event_title)\r\n    {\r\n        return this.grade_map.get(group_idx).get(event_title)\r\n    }\r\n\r\n    // lxt:属性\r\n    @property\r\n    attribute_name:string[] = []; //记录属性的名称\r\n\r\n    @property\r\n    private attributes = null\r\n\r\n    rec_gaussian(mean=0.5, sigma=0.2, lower=0.2, upper=1.0)\r\n    {\r\n        let a = cc.find('persist_node').getComponent('persist_node').gaussian_random(mean, sigma)\r\n        if (a <= lower) return lower\r\n        else if (a >= upper) return upper\r\n        return a\r\n    }\r\n\r\n    set_attr(attr_name, attr_value)\r\n    {\r\n        this.attributes.set(attr_name, attr_value)\r\n    }\r\n\r\n    change_attr(attr_name, attr_value)\r\n    {\r\n        if (this.attributes.has(attr_name) && attr_value + this.attributes.get(attr_name) < 0) this.attributes.set(attr_name, 0)\r\n        else if (this.attributes.has(attr_name)) this.attributes.set(attr_name, attr_value)\r\n        else this.attributes.set(attr_name, attr_value + this.attributes.get(attr_name))\r\n    }\r\n\r\n    get_attr(attr_name)\r\n    {\r\n        if (!this.attributes.get(attr_name)) this.attributes.set(attr_name, Math.round(this.rec_gaussian()*100))\r\n        return this.attributes.get(attr_name)\r\n    }\r\n\r\n    get_avg_attr()\r\n    {\r\n        //console.debug('getavg')\r\n        let sum = 0\r\n        let attr = Array.from(this.attributes)\r\n        //console.debug('attr')\r\n        //console.debug(attr.length)\r\n        for (let i = 0; i < attr.length; ++i)\r\n        {\r\n            sum += attr[i][1]\r\n            //console.debug(sum.toString())\r\n        }\r\n         //sum += attr[i][1]\r\n        return sum/attr.length\r\n    }\r\n\r\n    init_attr()\r\n    {\r\n        for (let i = 0; i < this.attribute_name.length; ++i)\r\n        {\r\n            let val = Math.round(this.rec_gaussian()*100)\r\n            this.set_attr(this.attribute_name[i], val)\r\n            //console.debug(this.attribute_name[i])\r\n            //console.debug('value: '+val.toString())\r\n        }\r\n    }\r\n\r\n    sort_attr(){  //用于给属性值大小排序，并且获得['战力','心境','元神','福源','灵根','悟性','善','恶','特殊']次序的从小到大排序数组\r\n        let attr_value_array:number[] = [];\r\n        let index:number[] = [];\r\n        for(let i =0 ; i<this.attribute_name.length ; ++i){\r\n            attr_value_array.push(this.get_attr(this.attribute_name[i]));\r\n            index.push(i); //保存下标，跟着快排一起排序\r\n        }\r\n        \r\n        this.quick_sort(attr_value_array, index, 0, attr_value_array.length-1); //进行排序\r\n    \r\n        return index;  //index最后保存各个元素下标所在的位置，比如index[3] = 5，即第5号属性排第3+1=4位\r\n\r\n    }\r\n\r\n    //以下为快排函数*********\r\n    quick_sort(input:number[], index:number[], start:number,end:number){\r\n        if(start>=end){\r\n            return\r\n        }\r\n        let pivotIndex=this.partition(input, index, start, end) // 1.\r\n        this.quick_sort(input,index,start,pivotIndex-1) // 2.\r\n        this.quick_sort(input,index,pivotIndex+1,end)\r\n    }\r\n\r\n    partition(input:number[], index:number[], start:number,end:number):number {\r\n        let pivot = input[start] // 1.\r\n        let pivot_idx = index[start];\r\n\r\n        let left = start // 2.\r\n        let right = end // 3.\r\n        while (left != right) {\r\n            while(left<right&&input[right]>pivot){ // 4.\r\n                right--\r\n            }\r\n            while(left<right&&input[left]<=pivot){ // 5.\r\n                left++\r\n            }\r\n            if(left<right){ // 6.\r\n                let tmp=input[left]\r\n                input[left]=input[right]\r\n                input[right]=tmp\r\n\r\n                let idx=index[left];\r\n                index[left]=index[right];\r\n                index[right]=idx;\r\n            }\r\n        }\r\n        input[start] = input[left] // 7.\r\n        input[left] = pivot\r\n\r\n        index[start]=index[left];\r\n        index[left]=pivot_idx\r\n\r\n\r\n        return left\r\n    }\r\n    //以上为快排函数****************\r\n\r\n\r\n    //以下是背包属性\r\n    //各类物品\r\n    @property\r\n    private item0: number = 0;\r\n    @property\r\n    private item1: number = 0;\r\n    @property\r\n    private item2: number = 0;\r\n    @property\r\n    private item3: number = 0;\r\n    @property\r\n    private item4: number = 0;\r\n    @property\r\n    private item5: number = 0;\r\n    @property\r\n    private item6: number = 0;\r\n    @property\r\n    private item7: number = 0;\r\n\r\n    @property\r\n    item_name:string[] = [];\r\n\r\n    //设置属性的数值，选中要更改的属性，然后设置数值\r\n    setitem(itemID:number, itemnum:number){\r\n        let a = this.getitem();\r\n        if(a[itemID] + itemnum < 0){\r\n          //防止小于0的情况\r\n        }\r\n\r\n        else{\r\n            switch (itemID) {\r\n                case itemID=0:\r\n                    this.item0 += itemnum;\r\n                    break;\r\n                case itemID=1:\r\n                    this.item1 += itemnum;\r\n                    break;\r\n                case itemID=2:\r\n                    this.item2 += itemnum;\r\n                    break;\r\n                case itemID=3:\r\n                     this.item3 += itemnum;\r\n                    break;\r\n                case itemID=4:\r\n                    this.item4 += itemnum;\r\n                    break;\r\n                case itemID=5:\r\n                    this.item5 += itemnum;\r\n                    break;\r\n                case itemID=6:\r\n                    this.item6 += itemnum;\r\n                    break;\r\n                case itemID=7:\r\n                    this.item7 += itemnum;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    //获取属性值，返回属性值数组\r\n    public getitem(){\r\n        let itemarray: number[] = [this.item0, this.item1, this.item2, this.item3, this.item4, this.item5, this.item6, this.item7];\r\n        //console.debug(\"属性值获取成功\"+ String(itemarray));\r\n        return itemarray;\r\n    }\r\n\r\n    //人物成长属性\r\n    //人物等级\r\n    @property\r\n    level: number = 0;\r\n\r\n    @property\r\n    sub_level: number = 0\r\n\r\n    get_level()\r\n    {\r\n        let level_name = ['练气','筑基','金丹','元婴']\r\n        return level_name[this.level%4]\r\n    }\r\n\r\n    up_level()\r\n    {\r\n        this.level += 1\r\n        this.sub_level = 0\r\n        this.age_limited *= 2.5\r\n        this.age_limited -= this.gaussian_random(0,(this.level+1)*10)\r\n    }\r\n\r\n    get_sublevel()\r\n    {\r\n        let level_name = ['初期','中期','后期']\r\n        return level_name[this.sub_level]\r\n    }\r\n\r\n    up_sublevel()\r\n    {\r\n        this.sub_level += 1\r\n    }\r\n\r\n    //人物当前经验值\r\n    @property\r\n    exp_now: number = 0;\r\n\r\n    exp_inf(){\r\n        return [this.level, this.exp_now];\r\n    }\r\n\r\n    //用于exp节点初始化经验值条，以及返回等级和经验值，【lxt】：是不是初始化不太需要进度慢慢爬，直接显示经验值就好，否则怪怪的感觉\r\n    exp_init(){\r\n        let exp = cc.find('exp').getComponent(cc.Sprite);\r\n        /*\r\n        this.schedule(()=>{\r\n            exp.fillRange+= (1/this.exp_required());  //经验exp.fillRange到1表示经验满，经验值增长的可视化横条，1/this.exp_required()表示每间隔一定时间增加这么多的经验条显示，实现动态增长\r\n        }, 1/this.exp_required()/25, this.exp_now);\r\n        */\r\n        exp.fillRange = 0;\r\n        let exp_now = this.exp_now;\r\n\r\n        this.exp_now = 0;\r\n        //this.exp_gain(-exp_now);   //【陈晟】修改了一个bug，每次初始化时需要重新执行一次exp_gain()方法，让经验重新上涨，直接改变fillRange不管用\r\n\r\n\r\n        return [this.level, this.exp_now]; \r\n    }\r\n\r\n    //不同等级的所需经验\r\n    exp_required():number{\r\n        return (2**(this.sub_level+1))*100*(10**this.level);  //可以设置其他单调递增函数\r\n    }\r\n\r\n    /*\r\n    //判断经验值是否溢出\r\n    exp_filled(exp_now:number, exp_add:number){\r\n        //如果经验值增长超过最大经验值，则设置为当前等级的最大经验值，否则直接相加作为当前经验值\r\n        if((exp_now+exp_add) <= this.exp_required()){\r\n            this.exp_now += exp_add;\r\n        }\r\n        else{\r\n            this.exp_now = this.exp_required();\r\n        }\r\n    }\r\n    */\r\n\r\n    //增长经验条的方法\r\n    exp_gain(event_exp:number, option=true){// 此方法只在Scene Main使用\r\n        //【刘鑫涛】：此处是否不在方法内判别事件类型呢，将此方法只作为操作数据之目的，要增加多少经验由外部逻辑指定，然后由此方法将经验条加到那个位置\r\n        //【陈晟】涛哥这里改的挺好，控制增长时间为1秒\r\n        // 即level1满值200经验，传入参数代表增加经验值\r\n        //延时函数让经验条可以延时连续上涨\r\n\r\n        let toward = event_exp / Math.abs(event_exp)\r\n\r\n        if(event_exp == 0){ //【陈晟】这里修复了一个bug，即toward不能0/0无限大，不然fillRange会直接满\r\n            toward=0;\r\n        }\r\n\r\n\r\n        let end = this.exp_now + event_exp\r\n        if (end > this.exp_required()) end = this.exp_required()\r\n        else if (end < 0) end = 0\r\n        let gap = Math.abs(end - this.exp_now)\r\n        //let toward = this.exp_now - begin > 0 ? 1 : -1 //如果经验正在减少\r\n        this.exp_now = end \r\n        let exp = cc.find('exp').getComponent(cc.Sprite)\r\n        if (option)\r\n        this.schedule(()=>{\r\n            exp.fillRange+= ((gap/30)/this.exp_required()*toward);  //经验exp.fillRange到1表示经验满，经验值增长的可视化横条，1/this.exp_required()表示每间隔一定时间增加这么多的经验条显示，实现动态增长\r\n        }, (gap/30)/this.exp_required(), 30);  //这里连续增长的gap要等于1/this.exp_required()*toward的倒数才能增长到，并且gap越小，前面的间隔时间也越小，则增长速度越快\r\n        \r\n    }\r\n\r\n\r\n    //日志系统\r\n    @property(cc.Vec2)\r\n    log_loc:cc.Vec2 = new cc.Vec2(0,0);\r\n\r\n    @property\r\n    log_freq:number = 1;\r\n\r\n    @property\r\n    event_all:string[] = [];   //存放所有的日志，日志节点初始化时写入\r\n\r\n    @property\r\n    event_add:string[] = [];   //存放新增加的日志，如果有新的，则日志节点被点开时写入\r\n\r\n    //日志初始化并写入, isadd代表是不是再打开日志面板时写入新日志，如果是则一边写一边清空新增加的事件，防止重复写入\r\n    log_init(isadd:boolean=true){\r\n        if(isadd == true){\r\n            for(var i:number=0 ; i<this.event_add.length ; i++ ){\r\n\r\n                this.log_add(this.event_add[i]);\r\n            }\r\n            let len = this.event_add.length //必须先得到长度，不然会少pop一个\r\n            for(var i:number=0 ; i<len ; i++ ){\r\n\r\n                this.event_add.pop();\r\n            }\r\n            \r\n        }\r\n\r\n        else{\r\n            this.log_loc.y = -200;//重新写的时候 要初始化写入文本的y轴位置\r\n            for(var i:number=0 ; i<this.event_all.length ; i++ ){\r\n                this.log_add(this.event_all[i]);\r\n            }\r\n\r\n            let len = this.event_add.length   //如果初始化日志节点时新增事件中有事件，也要pop出去\r\n            for(var i:number=0 ; i<len ; i++ ){\r\n\r\n                this.event_add.pop();\r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    //保存日志内容\r\n    log_write(event:string){\r\n\r\n        var len = this.event_all.push(event);\r\n        var len = this.event_add.push(event);\r\n        \r\n    }\r\n\r\n    //日志初始化写入方阿飞\r\n    log_add(event:string){\r\n        //写入日志的准备\r\n        let content = cc.find('log_panel').getChildByName('log_ScrollView').getChildByName(\"view\").getChildByName(\"content\"); //找到要保存日志的父节点\r\n        let new_content = new cc.Node();  //初始化新节点为实例化的一个节点\r\n        var log_text = new_content.addComponent(cc.Label); //增加label组件并赋给log_text\r\n        new_content.color = cc.color(0,0,0); //将字体改为黑色\r\n        //设置文本大小\r\n        log_text.fontSize = 50;\r\n        log_text.lineHeight=50;\r\n        log_text.enableBold = true;\r\n \r\n        new_content.setParent(content);  //设置根节点为content\r\n        new_content.x = this.log_loc.x;\r\n        new_content.y = this.log_loc.y;\r\n\r\n\r\n   \r\n        //将超过长度的字符串加上换行符\r\n        let event_copy = [];\r\n        let count_row = 1;\r\n        for(var i :number=0 ; i<event.length ; i++){\r\n           var len = event_copy.push(event[i]);\r\n           if(i%16 == 0 && i!=0){                    //每16个字符加一个换行符\r\n            count_row += 1;\r\n            var len = event_copy.push('\\n');\r\n            var len = event_copy.push('\\n');\r\n            }\r\n        }\r\n        \r\n         \r\n\r\n        this.log_loc.y -= (150*count_row+80); //下一次记录位置往下移动\r\n        this.log_freq += 1; //记录日志数量+1\r\n        content.setContentSize(900, 400*this.log_freq)//日志高度增加\r\n\r\n        log_text.string = event_copy.join('');  //属性改变\r\n\r\n    }\r\n\r\n\r\n\r\n    onLoad () {\r\n        cc.game.addPersistRootNode(this.node);  //设置本节点为常驻节点\r\n        this.log_loc.y = -200;\r\n        this.attribute_name = ['战力','心境','元神','福源','灵根','悟性','善','恶','特殊'];\r\n        this.item_name = [];\r\n        this.attributes = new Map<string, number>()\r\n        this.init_attr()\r\n        this.initAge()\r\n    }\r\n\r\n    start () {\r\n        //console.debug(this.gaussian_random(0,20,100))\r\n        cc.loader.loadRes('events.json', (err, obj)=>{\r\n            //console.debug('flag...')\r\n            if (err){\r\n                //console.debug('err')\r\n                console.debug(err)\r\n                return\r\n            }\r\n            console.debug('read...')\r\n            this.event_lib = obj.json\r\n            this.event_grade_map = new Map()\r\n        })\r\n\r\n    }\r\n\r\n\r\n     update (dt) {\r\n\r\n\r\n\r\n     }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]}