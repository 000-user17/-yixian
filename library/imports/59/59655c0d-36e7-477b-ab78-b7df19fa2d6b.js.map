{"version":3,"sources":["assets\\script\\scene2\\danyao.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAoC,0BAAY;IAAhD;QAAA,qEAiVC;QA9UG,kBAAY,GAAU,CAAC,CAAC,CAAM,uEAAuE;QAGrG,gBAAU,GAAU,CAAC,CAAC,CAAO,QAAQ;QAGrC,kBAAY,GAAW,IAAI,CAAC,CAAC,uBAAuB;QASpD,oBAAoB;QACpB,mBAAa,GAAY,EAAE,CAAC,CAAC,oBAAoB;QACjD,mBAAa,GAAY,EAAE,CAAC,CAAA,cAAc;;IA6T9C,CAAC;IA3TG,qDAAqD;IACrD,mCAAkB,GAAlB,UAAmB,GAAU;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IACD,6BAA6B;IAC7B,mCAAkB,GAAlB,UAAmB,MAAa;QAC5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACpC,CAAC;IAED,wBAAwB;IAExB,kCAAiB,GAAjB;QACI,OAAO,IAAI,CAAC,aAAa,CAAC;IAC9B,CAAC;IAED,gCAAe,GAAf;QACI,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,gCAAe,GAAf,UAAgB,IAAY;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC5B,CAAC;IAED,uBAAM,GAAN;QACI,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,CAAC,kBAAkB;QAE9C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,sBAAsB;QAEhD,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB;QAErG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,aAAa;QAEpC,IAAI,CAAC,YAAY,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;IAEtC,CAAC;IAED,WAAW;IACX,+BAAc,GAAd;QACI,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,YAAY;IACrH,CAAC;IAED,gBAAgB;IAChB,+BAAc,GAAd;QACI,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAA;QACxD,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAE,GAAC,CAAC,CAAC,CAAC;IAClD,CAAC;IAED,gBAAgB;IAChB,+BAAc,GAAd;QACI,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAA;QACxD,OAAO,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,WAAW,EAAE,GAAC,CAAC,CAAC,CAAC;IAEnD,CAAC;IAED,sBAAsB;IACtB,+BAAc,GAAd;QACI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,+BAA+B;IAC/B,+BAAc,GAAd;QAEI,oCAAoC;QACpC,oCAAoC;QAEpC,IAAG,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,IAAE,CAAC,EAAC,EAAE,4BAA4B;YACpH,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAA;YAEnC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;YAC5F,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC,WAAW;YAChH,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,SAAS;YAC/F,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;SAG5B;aACG;SAGH;IAEL,CAAC;IAED,oBAAoB;IACpB,+BAAc,GAAd;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC5B,CAAC;IAGD,kBAAkB;IAClB,+BAAc,GAAd;QACI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IACpC,CAAC;IAGD,aAAa;IACb,+BAAc,GAAd;QACI,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;IAC3E,CAAC;IAED,aAAa;IACb,+BAAc,GAAd;QACI,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QACnE,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,YAAY,EAAE,GAAC,CAAC,CAAC,CAAC;IAE/C,CAAC;IAID,WAAW;IACX,6BAAY,GAAZ,UAAa,IAAW;QAEpB,IAAI,YAAY,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,KAAK,GAAG,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,kBAAkB;QACnE,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,SAAS;QACrD,QAAQ;QACR,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;QACpB,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;QAEtB,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAE,mBAAmB;QACvD,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,gBAAgB;QACpC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA,oBAAoB;QACvC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QAGpB,IAAI,CAAC,QAAQ,CAAC;YACV,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAI,qBAAqB;QACjD,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAEb,gDAAgD;QAChD,UAAU,CAAC;YACP,YAAY,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;IAIb,CAAC;IAGD,YAAY;IACZ,2BAAU,GAAV;QACI,QAAQ,IAAI,CAAC,YAAY,EAAE,EAAI,oBAAoB;YAC/C,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC,EAAG,QAAQ;oBAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU;iBAG5C;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;iBAGjC;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBACD,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;iBAGtC;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;iBAGpC;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAGV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;iBAGrC;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;iBAG9B;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;iBAG9B;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAEV,KAAK,CAAC;gBACF,IAAG,IAAI,CAAC,UAAU,GAAG,CAAC,EAAC;oBACnB,IAAI,CAAC,cAAc,EAAE,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;iBAG9B;qBAEG;oBACA,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAE,QAAQ;iBAExC;gBAED,MAAM;YAGV;gBAEI,MAAM;SACb;QAED,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,SAAS,EAAE,UAAC,GAAG,EAAC,IAAI;YAC7C,MAAM;YACN,IAAI,OAAO,GAAW,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC7D,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACxC,QAAQ;YACR,+BAA+B;QACnC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa;QAClG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAA,iBAAiB;QACvC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,gBAAgB;IAEtC,CAAC;IAED,oBAAoB;IACpB,0BAAS,GAAT;QAEI,IAAI,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,kBAAkB;QAC7E,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,SAAS;QAC1D,QAAQ;QACR,UAAU,CAAC,QAAQ,GAAG,EAAE,CAAC;QACzB,UAAU,CAAC,UAAU,GAAG,EAAE,CAAC;QAE3B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAE,mBAAmB;QAC5D,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,gBAAgB;QACzC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA,oBAAoB;QAC9C,UAAU,CAAC,MAAM,GAAG,GAAG,GAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACpD,CAAC;IAID,sBAAK,GAAL;QAAA,iBAUC;QARG,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAC,KAAK;YAC9C,UAAU;YACV,KAAI,CAAC,UAAU,EAAE,CAAC;QAGtB,CAAC,CAAC,CAAA;IAEN,CAAC;IAEA,uBAAM,GAAN,UAAQ,EAAE;IAIX,CAAC;IA7UD;QADC,QAAQ;gDACe;IAGxB;QADC,QAAQ;8CACa;IAGtB;QADC,QAAQ;gDACmB;IATX,MAAM;QAD1B,OAAO;OACa,MAAM,CAiV1B;IAAD,aAAC;CAjVD,AAiVC,CAjVmC,EAAE,CAAC,SAAS,GAiV/C;kBAjVoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class danyao extends cc.Component {\r\n\r\n    @property\r\n    danyao_index:number = 0;      //丹药类型,与persist_node里面的丹药顺序一一对应,需要在cocos界面更改不同丹药的索引,并且该变量使得不同丹药能够使用同一脚本\r\n\r\n    @property\r\n    danyao_num:number = 0;       //当前丹药数量\r\n\r\n    @property\r\n    danyao_label:cc.Node = null; //用于表示丹药数量的label，用于动态生成\r\n\r\n\r\n    double_effect:boolean;//服务于丹药2，如果使用丹药2则开启双倍效益\r\n\r\n\r\n    yuce_effect:boolean; //服务于【丹药4】 点击要预测的筋脉即可显示其对丹田的影响\r\n\r\n\r\n    //下面两个变量用于【丹药3】的撤回操作\r\n    chehui_effect:number[] = []; //用于保存之前的丹田值和超出值得变化栈\r\n    chehui_jinmai:string[] = [];//用于保存筋脉操作顺序的栈\r\n\r\n    //入栈方法，在突破筋脉时执行，保存筋脉的explosion+this.danmai的变化用于撤回数值操作\r\n    push_chehui_effect(num:number){\r\n        this.chehui_effect.push(num);\r\n    }\r\n    //在突破时执行，用于保存筋脉的名称，用于将经脉再显示出来\r\n    push_chehui_jinmai(jinmai:string){\r\n        this.chehui_jinmai.push(jinmai);\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    get_double_effect(){ //获取是否双倍效益方法\r\n        return this.double_effect;\r\n    }\r\n\r\n    get_yuce_effect(){  //获取是否能预测的方法\r\n        return this.yuce_effect;\r\n    }\r\n\r\n    set_yuce_effect(bool:boolean){\r\n        this.yuce_effect = bool;\r\n    }\r\n\r\n    onLoad () {  \r\n        this.double_effect = false; //初始化为false，即无双倍影响\r\n\r\n        this.yuce_effect = false; //初始化是否能预测为false，即不能预测\r\n\r\n        cc.find('persist_node').getComponent('persist_node').setitem(this.danyao_index,9); //测试丹药效果，增加丹药【供测试】\r\n\r\n        this.get_danyao_num(); //预载时获取对应丹药数量\r\n\r\n        this.danyao_label = new cc.Node();\r\n\r\n    }\r\n\r\n    //获取对应的丹药数量\r\n    get_danyao_num(){\r\n        this.danyao_num = cc.find('persist_node').getComponent('persist_node').getitem()[this.danyao_index]; //获取对应顺序的丹药数\r\n    }\r\n\r\n    //丹药效果为增加100点丹田值\r\n    danyao_effect0(){\r\n        let dantian = cc.find('dantian').getComponent('dantian')\r\n        dantian.dantian_gain(dantian.dantian_max()/2);\r\n    }\r\n\r\n    //丹药效果为减少100点丹田值\r\n    danyao_effect1(){\r\n        let dantian = cc.find('dantian').getComponent('dantian')\r\n        dantian.dantian_gain(-dantian.dantian_max()/2);\r\n\r\n    }\r\n\r\n    //丹药效果，使得下次突破筋脉的作用效果翻倍\r\n    danyao_effect2(){\r\n        this.double_effect = true;\r\n    }\r\n\r\n    //丹药效果，撤回上一次筋脉突破的效果,只能撤回筋脉突破的效果\r\n    danyao_effect3(){\r\n\r\n        //console.debug(this.chehui_effect);\r\n        //console.debug(this.chehui_jinmai);\r\n\r\n        if(this.chehui_effect.length == this.chehui_jinmai.length && this.chehui_effect.length!=0){ //当两个栈同时放入进去之后并且不为空，才能执行撤回操作\r\n            let len = this.chehui_effect.length\r\n\r\n            cc.find('jinmai').getChildByName(this.chehui_jinmai[len-1]).getComponent('jinmai').appear();\r\n            cc.find('jinmai').getChildByName(this.chehui_jinmai[len-1]).getComponent('jinmai').is_click = false; //重置经脉的可点击性\r\n            cc.find('dantian').getComponent('dantian').dantian_gain(-1*this.chehui_effect.pop()); //撤回丹田的操作\r\n            this.chehui_jinmai.pop();\r\n\r\n\r\n        }\r\n        else{\r\n            \r\n\r\n        }\r\n\r\n    }\r\n\r\n    //丹药效果，显示下一条要突破筋脉的信息\r\n    danyao_effect4(){\r\n        this.yuce_effect = true;\r\n    }\r\n\r\n    \r\n    //丹药效果，重置界面，重新开始突破\r\n    danyao_effect5(){\r\n        cc.director.loadScene('scene2');\r\n    }\r\n\r\n\r\n    //丹药6效果，增加精力值\r\n    danyao_effect6(){\r\n        cc.find('persist_node').getComponent('persist_node').changeEnergy(200);\r\n    }\r\n\r\n    //丹药7效果，增加经验值\r\n    danyao_effect7(){\r\n        let persist = cc.find('persist_node').getComponent('persist_node');\r\n        persist.exp_gain(persist.exp_required()/3);\r\n\r\n    }\r\n\r\n    \r\n\r\n    //丹药使用的提示效果\r\n    danyao_tishi(name:string){\r\n        \r\n        let danyaohaojin = new cc.Node();\r\n        var tishi = danyaohaojin.addComponent(cc.Label); //增加label组件并赋给丹药数量\r\n        danyaohaojin.color = cc.color(255,255,255); //将字体改为白色\r\n        //设置文本大小\r\n        tishi.fontSize = 40;\r\n        tishi.lineHeight = 40;\r\n \r\n        danyaohaojin.setParent(this.node);  //父节点是this.node才能出来\r\n        danyaohaojin.x = 0; //相对于父节点的横坐标位置不变\r\n        danyaohaojin.y = 0;//相对于父节点的纵坐标在下面一点的位置\r\n        tishi.string = name;  \r\n\r\n\r\n        this.schedule(()=>{\r\n            danyaohaojin.y += 5;    //增加5和减少0.01都可以增快提示速度\r\n        }, 0.01, 20);\r\n\r\n        //延时最后的时间为ms,延时1秒销毁，如果在上面的schedule函数还没执行完就销毁，会报错\r\n        setTimeout(()=>{\r\n            danyaohaojin.destroy();\r\n        }, 1000);\r\n\r\n\r\n        \r\n    }\r\n\r\n    \r\n    //丹药使用时的方法选择\r\n    danyao_use(){\r\n        switch (this.danyao_index) {   //保证不同的丹药执行不同的使用效果方法\r\n            case 0:\r\n                if(this.danyao_num > 0){  //判断丹药数量\r\n                    this.danyao_effect0();\r\n                    this.danyao_tishi('增加一半的丹田值'); //提示丹药使用成功\r\n         \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n                    \r\n                }\r\n                \r\n                break;\r\n            \r\n            case 1:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect1();\r\n                    this.danyao_tishi('减少一半的丹田值');\r\n                  \r\n              \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                break;\r\n            \r\n            case 2:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect2();\r\n                    this.danyao_tishi('下一条要突破的筋脉双倍效果');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n            \r\n            case 3:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect3();\r\n                    this.danyao_tishi('撤回上一条筋脉突破效果');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n            \r\n            \r\n            case 4:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect4();\r\n                    this.danyao_tishi('预测下一条突破筋脉的数值');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n\r\n            case 5:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect5();\r\n                    this.danyao_tishi('已重置突破');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n\r\n            case 6:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect6();\r\n                    this.danyao_tishi('精力值增加');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n            \r\n            case 7:\r\n                if(this.danyao_num > 0){\r\n                    this.danyao_effect7();\r\n                    this.danyao_tishi('经验值增加');\r\n               \r\n                    \r\n                }\r\n\r\n                else{\r\n                    this.danyao_tishi('丹药已耗尽');  //提示丹药耗尽\r\n\r\n                }\r\n                \r\n                break;\r\n\r\n            \r\n            default:\r\n\r\n                break;\r\n        }\r\n\r\n        cc.loader.loadRes(\"使用物品\", cc.AudioClip, (res,clip)=>{\r\n            //播放音乐\r\n            let audioID: number = cc.audioEngine.playEffect(clip, false);\r\n            cc.audioEngine.setVolume(audioID, 0.05);\r\n            //停止播放音乐\r\n            //cc.audioEngine.stop(audioID);\r\n        });\r\n        \r\n        cc.find('persist_node').getComponent('persist_node').setitem(this.danyao_index, -1); //人物背包丹药数目减少1\r\n        this.get_danyao_num();//实时回传到本界面节点的丹药数量\r\n        this.danyao_ui(); //保证实时更新使用后的丹药数量\r\n\r\n    }\r\n\r\n    //用于在当前界面实时更新并显示丹药数量\r\n    danyao_ui(){\r\n\r\n        var danyao_num = this.danyao_label.addComponent(cc.Label); //增加label组件并赋给丹药数量\r\n        this.danyao_label.color = cc.color(255,255,255); //将字体改为白色\r\n        //设置文本大小\r\n        danyao_num.fontSize = 40;\r\n        danyao_num.lineHeight = 40;\r\n \r\n        this.danyao_label.setParent(this.node);  //父节点是this.node才能出来\r\n        this.danyao_label.x = 0; //相对于父节点的横坐标位置不变\r\n        this.danyao_label.y = -80;//相对于父节点的纵坐标在下面一点的位置\r\n        danyao_num.string = 'X'+String(this.danyao_num);  \r\n    }\r\n\r\n    \r\n\r\n    start () {\r\n\r\n        this.danyao_ui();\r\n        this.node.on(cc.Node.EventType.TOUCH_START, (event)=>{\r\n            //触碰丹药后的效果\r\n            this.danyao_use();\r\n\r\n\r\n        })\r\n\r\n    }\r\n\r\n     update (dt) {\r\n        \r\n\r\n\r\n    }\r\n}\r\n"]}