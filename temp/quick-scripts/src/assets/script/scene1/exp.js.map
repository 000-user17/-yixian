{"version":3,"sources":["assets\\script\\scene1\\exp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class exp extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    xiuxian: cc.Node = null;\r\n\r\n    @property\r\n    level:number = 0;\r\n\r\n    @property\r\n    exp_now:number = 0;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n\r\n\r\n   // onLoad () {}\r\n\r\n\r\n    start () {     \r\n        \r\n        [this.level, this.exp_now] = cc.find('persist_node').getComponent('persist_node').exp_init();  //初始化已经保存的经验条\r\n\r\n        //cc.find('persist_node').getComponent('persist_node').exp_gain(1000);  //测试时候用的，一开始就填满经验条 【供测试】\r\n\r\n        //触摸经验条面板，测试经验条增加，【供测试】\r\n        \r\n        this.node.on(cc.Node.EventType.TOUCH_START, (event)=>{\r\n            //cc.find('persist_node').getComponent('persist_node').exp_gain(200);\r\n            //cc.find('persist_node').getComponent('persist_node').log_write(\"经验值增加了~\");\r\n\r\n        });\r\n        \r\n        \r\n    }\r\n\r\n     update (dt) {\r\n        [this.level, this.exp_now] = cc.find('persist_node').getComponent('persist_node').exp_inf();\r\n        let sub_level = cc.find('persist_node').getComponent('persist_node').get_sublevel()\r\n        this.node.getComponentInChildren(cc.Label).string = Math.round(this.exp_now).toString() + '/' +\r\n             Math.round(cc.find('persist_node').getComponent('persist_node').exp_required()).toString()\r\n\r\n        //如果经验值满，则可以进入修仙界面\r\n        if(this.exp_now >= cc.find('persist_node').getComponent('persist_node').exp_required() && \r\n            this.node.getComponent(cc.Sprite).fillRange >= 1)\r\n        {\r\n            if (sub_level == '后期')\r\n            {\r\n                this.node.getParent().getChildByName('upgrade').getComponent(cc.Button).interactable = true\r\n                this.node.getParent().getChildByName('upgrade').getChildByName('Background').color = cc.Color.GREEN\r\n            }\r\n            else\r\n            {\r\n                cc.find('persist_node').getComponent('persist_node').exp_init()\r\n                cc.find('persist_node').getComponent('persist_node').up_sublevel()\r\n                //突破动画\r\n            }\r\n        }\r\n        /*\r\n        if(this.exp_now == cc.find('persist_node').getComponent('persist_node').exp_required() && this.node.getComponent(cc.Sprite).fillRange >= 1){\r\n            this.xiuxian.active=true;\r\n\r\n        }\r\n        else{\r\n            this.xiuxian.active=false;\r\n        }\r\n        */\r\n\r\n\r\n     }\r\n}\r\n"]}